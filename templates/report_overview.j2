{% set header = [
    "hostname",
    "inventory_name",
    "upgrade_required",
    "upload_required",
    "oneos_version",
    "software_version",
    "wanted_os_version",
    "boot_version",
    "wanted_boot_version",
    "recovery_version",
    "wanted_recovery_version",
    "disk_space_sufficient_for_all_files",
    "disk_space_sufficient_for_boot_and_recovery_files",
    "disk_space_sufficient_for_os_file",
    "disk_space_required_total",
    "total_disk_space",
    "free_disk_space",
    "scp_status",
    "os_file_exists_on_disk",
    "recovery_file_exists_on_disk",
    "os_is_in_active_software_bank",
    "os_is_in_alternate_software_bank",
    "ready_for_upgrading_boot",
    "ready_for_upgrading_os",
    "ready_for_upgrading_recovery",
    "upgrade_required_for_os",
    "upgrade_required_for_boot",
    "upgrade_required_for_recovery",
    "upload_required_os_file",
    "upload_required_boot_file",
    "upload_required_recovery_file",
    "wanted_boot_file",
    "wanted_os_file",
    "wanted_recovery_file",
    "upload_done_for_os_file",
    "upload_done_for_boot_file",
    "upload_done_for_recovery_file",
    "ready_for_upgrading_os",
    "ready_for_upgrading_boot",
    "ready_for_upgrading_recovery",
    ]
%}
{{ header | join(';') }}
{% for host in ansible_play_hosts | map('extract', hostvars) | list %}
{% set row = [
    host.hostname,
    host.inventory_hostname,
    host.upgrade_required_for_boot or host.upgrade_required_for_os or host.upgrade_required_for_recovery,
    host.upload_required_boot_file or host.upload_required_os_file or host.upload_required_recovery_file,
    host.ansible_facts.pre_check_system[0].VERSION,
    host.ansible_facts.pre_check_system[0].SOFTWARE,
    host.wanted_os_version,
    host.ansible_facts.pre_check_system[0].BOOT_VERSION,
    host.wanted_boot_version,
    host.ansible_facts.pre_check_system[0].RECOVERY_VERSION,
    host.wanted_recovery_version,
    host.disk_space_sufficient_for_all_files,
    host.disk_space_sufficient_for_boot_and_recovery_files,
    host.disk_space_sufficient_for_os_file,
    host.disk_space_required_total,
    host.fact_memory.USER_PARTITION_TOTAL,
    host.fact_memory.USER_PARTITION_TOTAL,
    host.fact_ssh[0].SCP,
    host.os_file_exists_on_disk,
    host.recovery_file_exists_on_disk,
    host.os_is_in_active_software_bank,
    host.os_is_in_alternate_software_bank,
    host.ready_for_upgrading_boot|default(),
    host.ready_for_upgrading_os|default(),
    host.ready_for_upgrading_recovery|default(),
    host.upgrade_required_for_os,
    host.upgrade_required_for_boot,
    host.upgrade_required_for_recovery,
    host.upload_required_os_file,
    host.upload_required_boot_file,
    host.upload_required_recovery_file,
    host.wanted_boot_file,
    host.wanted_os_file,
    host.wanted_recovery_file,
    host.upload_done_for_os_file|default(),
    host.upload_done_for_boot_file|default(),
    host.upload_done_for_recovery_file|default(),
    host.ready_for_upgrading_os|default(),
    host.ready_for_upgrading_boot|default(),
    host.ready_for_upgrading_recovery|default(),
    ]
%}
{{ row | join(';') }}
{% endfor %}
